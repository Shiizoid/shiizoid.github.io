<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Malla Interactiva ♡ Ingeniería Civil en Minas</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;700&display=swap" rel="stylesheet">
    <style>
        /* --- ESTILOS SANRIO / HELLO KITTY --- */
        :root {
            --color-principal: #ffb3c6; /* Rosado pastel principal */
            --color-secundario: #ff8fab; /* Rosado más fuerte para hover */
            --color-aprobado: #a9def9;  /* Azul pastel para ramos aprobados */
            --color-bloqueado-fondo: #f1f1f1;
            --color-bloqueado-texto: #cccccc;
            --color-texto-ramo: #5d3a47; /* Texto oscuro para buena lectura */
            --color-titulo: #c75d86;    /* Título en rosado oscuro */
            --color-fondo: #fff0f3;      /* Fondo de la página rosado muy claro */
            --radio-borde: 12px;
            --sombra: 0 4px 8px rgba(206, 127, 155, 0.15);
        }
        body {
            font-family: 'Nunito', sans-serif;
            background-color: var(--color-fondo);
            /* Fondo de Hello Kitty sutil */
            background-image: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMiIgaGVpZ2h0PSIzMiIgdmlld0JveD0iMCAwIDMyIDMyIj48cGF0aCBmaWxsPSJyZ2JhKDAsMCwwLDAuMDUpIiBkPSJNMTYgM2MwLTQgMTMtMyAxMyAwcy0xMyA3LTEzIDdDMyA3IDAgMCAzIDNzMTMgMyAxMyAwbTAtMmMwLTQgMTMtMyAxMyAwcy0xM0E3LTEzIDdDMyAxMSA1IDcgMyA0czEzIDMgMTMgMG0tMTMgMTRjMC00IDEzLTMgMTMgMHMtMTMgNy0xMyA3UzMgMjQgMCAyMHMxMyAzIDEzIDBtMC0yYzAtNCAxMy0zIDEzIDBzLTEzIDctMTMgN0MzIDI4IDUgMjQgMyAyM3MxMyAzIDEzIDBaIi8+PC9zdmc+');
            background-attachment: fixed;
            color: #333;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        h1 {
            font-family: 'Nunito', sans-serif;
            font-weight: 700;
            font-size: 2.5em;
            color: var(--color-titulo);
            text-align: center;
            margin-bottom: 5px;
            text-shadow: 2px 2px 0px rgba(255, 255, 255, 0.8);
        }
        h2 {
            font-size: 1.2em;
            color: var(--color-secundario);
            text-align: center;
            margin-bottom: 30px;
            font-weight: 400;
        }
        .malla-grid {
            display: grid;
            grid-auto-flow: column;
            gap: 15px;
            overflow-x: auto;
            padding: 20px;
            width: 100%;
            max-width: 1700px;
            margin: 0 auto;
        }
        .semestre {
            display: flex;
            flex-direction: column;
            gap: 12px;
            background-color: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(5px);
            padding: 20px;
            border-radius: var(--radio-borde);
            box-shadow: var(--sombra);
            width: 210px;
            border: 2px solid #ffffff;
        }
        .semestre-titulo {
            font-weight: 700;
            color: var(--color-titulo);
            text-align: center;
            font-size: 1.2em;
            padding-bottom: 10px;
            margin-bottom: 5px;
        }
        .ramo {
            background-color: var(--color-principal);
            color: var(--color-texto-ramo);
            padding: 14px 12px;
            border-radius: var(--radio-borde);
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            font-size: 0.9em;
            font-weight: 700;
            border: 2px solid rgba(255, 255, 255, 0.8);
            box-shadow: 0 2px 4px rgba(206, 127, 155, 0.1);
        }
        .ramo.bloqueado {
            background-color: var(--color-bloqueado-fondo);
            color: var(--color-bloqueado-texto);
            cursor: not-allowed;
            border-style: dashed;
            border-color: #e0e0e0;
        }
        .ramo.aprobado {
            background-color: var(--color-aprobado);
            color: #2b5168;
            text-decoration: line-through;
            opacity: 0.9;
            border-color: #cde6f9;
        }
        .ramo:not(.bloqueado):not(.aprobado):hover {
            background-color: var(--color-secundario);
            transform: scale(1.05);
            box-shadow: var(--sombra);
        }
    </style>
</head>
<body>

    <h1>Ingeniería Civil en Minas</h1>
    <h2>♡ Malla Curricular Interactiva ♡</h2>

    <div class="malla-grid" id="malla-container">
        </div>

    <script>
    // --- LÓGICA (la magia de JavaScript) ---
    const mallaData = [
        { semestre: 1, ramos: [
            { id: 'mat1', nombre: 'Introducción a las Matemáticas', prerequisitos: [] },
            { id: 'fis1', nombre: 'Introducción a la Física', prerequisitos: [] },
            { id: 'iminas', nombre: 'Introducción a la Ing. de Minas', prerequisitos: [] },
            { id: 'fba', nombre: 'Formación Básica para la Vida Académica', prerequisitos: [] },
            { id: 'ing1', nombre: 'Curso Sello I: Inglés I', prerequisitos: [] }
        ]},
        { semestre: 2, ramos: [
            { id: 'alg1', nombre: 'Álgebra I', prerequisitos: ['mat1'] },
            { id: 'cal1', nombre: 'Cálculo I', prerequisitos: ['mat1'] },
            { id: 'mec', nombre: 'Mecánica', prerequisitos: ['fis1'] },
            { id: 'fba2', nombre: 'Formación Básica II', prerequisitos: ['fba'] },
            { id: 'ing2', nombre: 'Curso Sello II: Inglés II', prerequisitos: ['ing1'] }
        ]},
        { semestre: 3, ramos: [
            { id: 'alg2', nombre: 'Álgebra II', prerequisitos: ['alg1'] },
            { id: 'cal2', nombre: 'Cálculo II', prerequisitos: ['cal1'] },
            { id: 'qgral', nombre: 'Química General', prerequisitos: ['mec'] },
            { id: 'geo_gen', nombre: 'Geología General', prerequisitos: [] },
            { id: 'tic', nombre: 'TIC para la Minería', prerequisitos: [] },
            { id: 'csi3', nombre: 'Curso Sello Institucional III', prerequisitos: [] }
        ]},
        { semestre: 4, ramos: [
            { id: 'edif', nombre: 'Ecuaciones Diferenciales', prerequisitos: ['cal2'] },
            { id: 'cal3', nombre: 'Cálculo III', prerequisitos: ['cal2'] },
            { id: 'elecmag', nombre: 'Electricidad y Magnetismo', prerequisitos: ['cal2', 'mec'] },
            { id: 'metprod', nombre: 'Métodos de Producción Minera', prerequisitos: ['iminas'] },
            { id: 'petmin', nombre: 'Petrografía y Mineralogía', prerequisitos: ['geo_gen'] },
            { id: 'csi4', nombre: 'Curso Sello Institucional IV', prerequisitos: ['csi3'] }
        ]},
        { semestre: 5, ramos: [
            { id: 'proest', nombre: 'Probabilidad y Estadística', prerequisitos: ['cal3'] },
            { id: 'feco', nombre: 'Fundamentos de Economía', prerequisitos: [] },
            { id: 'invop', nombre: 'Investigación Operativa', prerequisitos: ['alg2'] },
            { id: 'termo', nombre: 'Termodinámica', prerequisitos: ['edif'] },
            { id: 'metnum', nombre: 'Métodos Numéricos', prerequisitos: ['edif'] },
            { id: 'topogeo', nombre: 'Topografía y Geomensura Minera', prerequisitos: ['geo_gen'] }
        ]},
        { semestre: 6, ramos: [
            { id: 'geoest', nombre: 'Geoestadística', prerequisitos: ['proest'] },
            { id: 'evalp', nombre: 'Evaluación de Proyectos', prerequisitos: ['feco'] },
            { id: 'exgeo', nombre: 'Exploración y Geología Económica', prerequisitos: ['petmin'] },
            { id: 'pertro', nombre: 'Perforación y Tronadura', prerequisitos: ['metprod'] },
            { id: 'taller1', nombre: 'Taller Integrador I', prerequisitos: ['metprod'] },
            { id: 'interd1', nombre: 'Interdisciplinar', prerequisitos: [] }
        ]},
        { semestre: 7, ramos: [
            { id: 'evalyac', nombre: 'Evaluación Económica de Yacimientos', prerequisitos: ['geoest', 'evalp'] },
            { id: 'mecanicaf', nombre: 'Mecánica de Fluidos', prerequisitos: ['termo'] },
            { id: 'metalurgia', nombre: 'Fundamentos de Metalurgia', prerequisitos: ['qgral'] },
            { id: 'cargotrans', nombre: 'Carguío y Transporte', prerequisitos: ['pertro'] },
            { id: 'mecanicaroc', nombre: 'Mecánica de Rocas', prerequisitos: ['termo'] },
            { id: 'interd2', nombre: 'Interdisciplinar A+S', prerequisitos: ['interd1'] },
            { id: 'practop', nombre: 'Práctica Operacional', prerequisitos: [] }
        ]},
        { semestre: 8, ramos: [
            { id: 'software', nombre: 'Software de Productividad Minera', prerequisitos: ['metnum'] },
            { id: 'vent', nombre: 'Ventilación y Servicios Mina', prerequisitos: ['mecanicaf'] },
            { id: 'procmin', nombre: 'Procesamiento de Minerales', prerequisitos: ['metalurgia'] },
            { id: 'legis', nombre: 'Legislación Minera', prerequisitos: [] },
            { id: 'seguridad', nombre: 'Seguridad y Medio Ambiente en Minería', prerequisitos: [] },
            { id: 'taller2', nombre: 'Taller Integrador II', prerequisitos: ['taller1'] }
        ]},
        { semestre: 9, ramos: [
            { id: 'titulo1', nombre: 'Proyecto de Título I', prerequisitos: ['taller2'] },
            { id: 'gestionemp', nombre: 'Gestión de Empresas y Liderazgo', prerequisitos: [] },
            { id: 'diseno_sub', nombre: 'Diseño y Planif. Mina Subterránea', prerequisitos: ['mecanicaroc', 'cargotrans'] },
            { id: 'diseno_rajo', nombre: 'Diseño y Planif. Rajo Abierto', prerequisitos: ['mecanicaroc', 'cargotrans'] },
            { id: 'excelencia', nombre: 'Excelencia Operacional', prerequisitos: [] }
        ]},
        { semestre: 10, ramos: [
            { id: 'titulo2', nombre: 'Proyecto de Título II', prerequisitos: ['titulo1'] },
            { id: 'gestiontec', nombre: 'Gestión de la Tecnología en Minería', prerequisitos: ['gestionemp'] },
            { id: 'resp_social', nombre: 'Responsabilidad Social Empresarial', prerequisitos: [] },
            { id: 'innova', nombre: 'Innovación y Emprendimiento', prerequisitos: [] },
            { id: 'practicapro', nombre: 'Práctica Profesional', prerequisitos: ['practop'] }
        ]}
    ];

    const mallaContainer = document.getElementById('malla-container');
    let ramosAprobados = new Set(JSON.parse(localStorage.getItem('ramosAprobadosIngMinasKitty')) || []);

    function renderMalla() {
        mallaContainer.innerHTML = '';
        
        mallaData.forEach(semestreData => {
            const semestreDiv = document.createElement('div');
            semestreDiv.className = 'semestre';
            semestreDiv.id = `sem${semestreData.semestre}`;
            
            const tituloDiv = document.createElement('div');
            tituloDiv.className = 'semestre-titulo';
            tituloDiv.textContent = `🎀 Semestre ${semestreData.semestre} 🎀`;
            semestreDiv.appendChild(tituloDiv);

            semestreData.ramos.forEach(ramo => {
                const ramoDiv = document.createElement('div');
                ramoDiv.className = 'ramo';
                ramoDiv.dataset.id = ramo.id;
                ramoDiv.textContent = ramo.nombre;
                
                const prerrequisitosCumplidos = ramo.prerequisitos.every(pr => ramosAprobados.has(pr));

                if (ramosAprobados.has(ramo.id)) {
                    ramoDiv.classList.add('aprobado');
                } else if (!prerrequisitosCumplidos) {
                    ramoDiv.classList.add('bloqueado');
                }

                ramoDiv.addEventListener('click', () => toggleRamo(ramo, prerrequisitosCumplidos));
                semestreDiv.appendChild(ramoDiv);
            });
            
            mallaContainer.appendChild(semestreDiv);
        });
    }

    function toggleRamo(ramo, prerrequisitosCumplidos) {
        if (ramosAprobados.has(ramo.id)) {
            ramosAprobados.delete(ramo.id);
            const aDesaprobarRecursivo = new Set([ramo.id]);
            let cambio = true;
            while(cambio) {
                cambio = false;
                mallaData.flat().flatMap(s => s.ramos).forEach(r => {
                    if (ramosAprobados.has(r.id) && r.prerequisitos.some(p => aDesaprobarRecursivo.has(p))) {
                        ramosAprobados.delete(r.id);
                        aDesaprobarRecursivo.add(r.id);
                        cambio = true;
                    }
                });
            }

        } else if (prerrequisitosCumplidos) {
            ramosAprobados.add(ramo.id);
        } else {
            alert('¡Espera! ૮₍ ´ ꒳ `₎ა ♥ Debes aprobar los ramos anteriores primero.');
            return;
        }

        localStorage.setItem('ramosAprobadosIngMinasKitty', JSON.stringify([...ramosAprobados]));
        renderMalla();
    }

    renderMalla();
    </script>
</body>
</html>
