<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Malla Interactiva ♡ Ingeniería Civil en Minas</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --color-profesional: #ff8fab; /* Rosado Fuerte */
            --color-disciplinar: #ffb3c6; /* Rosado Principal */
            --color-general: #ffdce5;     /* Rosado Claro */
            --color-texto-general: #8c5d6a;
            
            --color-aprobado: #a9def9;
            --color-bloqueado-fondo: #f1f1f1;
            --color-bloqueado-texto: #cccccc;
            --color-texto-ramo: #5d3a47;
            --color-titulo: #c75d86;
            --color-fondo: #fff0f3;
            --radio-borde: 12px;
            --sombra: 0 4px 8px rgba(206, 127, 155, 0.15);
        }
        body {
            font-family: 'Nunito', sans-serif;
            background-color: var(--color-fondo);
            background-image: url('data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAkGBxAHBgsIBw8QEBAPEA8PDw8QDw8PDw8PFBEWFhYRFBQYHSggGBolGxUUITEhJSkrLi4uFx8zODMtNygtLisBCgoKDg0OFRAQFy0fFR4tLS0tLS0rLS0tLS0tLSstLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLf/AABEIAYUBlAMBEQACEQEDEQH/xAAYAAEBAQEBAAAAAAAAAAAAAAAAAQIDBv/EABoQAQEBAQEBAQAAAAAAAAAAAAABEQISITH/xAAXAQEBAQEAAAAAAAAAAAAAAAAAAQID/8QAFhEBAQEAAAAAAAAAAAAAAAAAAAER/9oADAMBAAIRAxEAPwD24BQCgBQCgCoAKAIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgIAAKgoCAACoKAgAAqCgD/9wADAP/2wCEAAgGBgcGBQgHBwcJCQgKDBQNDAsLDBkSEw8UHRofHh0aHBwgJC4nICIsIxwcKDcpLDAxNDQ0Hyc5PTgyPC4zNDIBCQkJDAsMGA0NGDIhHCEyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMv/EABQBAQAAAAAAAAAAAAAAAAAAAAD/xAAUEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwD54AAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAAIAAA-g');
            background-size: cover;
            background-attachment: fixed;
            color: #333;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        h1 {
            font-family: 'Nunito', sans-serif;
            font-weight: 700;
            font-size: 2.5em;
            color: var(--color-titulo);
            text-align: center;
            margin-bottom: 5px;
            text-shadow: 2px 2px 0px rgba(255, 255, 255, 0.9);
            background-color: rgba(255, 255, 255, 0.7);
            padding: 10px 20px;
            border-radius: 20px;
        }
        h2 {
            font-size: 1.2em;
            color: var(--color-secundario);
            text-align: center;
            margin-bottom: 30px;
            font-weight: 400;
            background-color: rgba(255, 255, 255, 0.6);
            padding: 5px 15px;
            border-radius: 15px;
        }
        .malla-grid {
            display: grid;
            grid-auto-flow: column;
            gap: 15px;
            overflow-x: auto;
            padding: 20px;
            width: 100%;
            max-width: 1700px;
            margin: 0 auto;
        }
        .semestre {
            display: flex;
            flex-direction: column;
            gap: 12px;
            background-color: rgba(255, 255, 255, 0.85);
            backdrop-filter: blur(6px);
            padding: 20px;
            border-radius: var(--radio-borde);
            box-shadow: var(--sombra);
            width: 210px;
            border: 2px solid #ffffff;
        }
        .semestre-titulo {
            font-weight: 700;
            color: var(--color-titulo);
            text-align: center;
            font-size: 1.2em;
            padding-bottom: 10px;
            margin-bottom: 5px;
        }
        .ramo {
            color: var(--color-texto-ramo);
            padding: 14px 12px;
            border-radius: var(--radio-borde);
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            font-size: 0.9em;
            font-weight: 700;
            border: 2px solid rgba(255, 255, 255, 0.9);
            box-shadow: 0 2px 4px rgba(206, 127, 155, 0.1);
        }
        .ramo.profesional { background-color: var(--color-profesional); }
        .ramo.disciplinar { background-color: var(--color-disciplinar); }
        .ramo.general { 
            background-color: var(--color-general); 
            color: var(--color-texto-general);
        }
        .ramo.bloqueado {
            background-color: var(--color-bloqueado-fondo);
            color: var(--color-bloqueado-texto);
            cursor: not-allowed;
            border-style: dashed;
            border-color: #e0e0e0;
        }
        .ramo.aprobado {
            background-color: var(--color-aprobado);
            color: #2b5168;
            text-decoration: line-through;
            opacity: 0.9;
            border-color: #cde6f9;
        }
        .ramo:not(.bloqueado):not(.aprobado):hover {
            transform: scale(1.05);
            box-shadow: var(--sombra);
        }
        .ramo.profesional:not(.bloqueado):not(.aprobado):hover { background-color: #fa709a; }
        .ramo.disciplinar:not(.bloqueado):not(.aprobado):hover { background-color: #ff9ab6; }
        .ramo.general:not(.bloqueado):not(.aprobado):hover { background-color: #fbd0da; }
    </style>
</head>
<body>

    <h1>Ingeniería Civil en Minas</h1>
    <h2>♡ Malla Curricular Interactiva ♡</h2>

    <div class="malla-grid" id="malla-container">
        </div>

    <script>
    const mallaData = [
        { semestre: 1, ramos: [
            { id: 'mat1', nombre: 'Introducción a las Matemáticas', prerequisitos: [], area: 'disciplinar', emoji: '🔬' },
            { id: 'fis1', nombre: 'Introducción a la Física', prerequisitos: [], area: 'disciplinar', emoji: '🔬' },
            { id: 'iminas', nombre: 'Introducción a la Ing. de Minas', prerequisitos: [], area: 'profesional', emoji: '⛏️' },
            { id: 'fba', nombre: 'Formación Básica para la Vida Académica', prerequisitos: [], area: 'general', emoji: '🎓' },
            { id: 'ing1', nombre: 'Curso Sello I: Inglés I', prerequisitos: [], area: 'general', emoji: '🎓' }
        ]},
        { semestre: 2, ramos: [
            { id: 'alg1', nombre: 'Álgebra I', prerequisitos: ['mat1'], area: 'disciplinar', emoji: '🔬' },
            { id: 'cal1', nombre: 'Cálculo I', prerequisitos: ['mat1'], area: 'disciplinar', emoji: '🔬' },
            { id: 'mec', nombre: 'Mecánica', prerequisitos: ['fis1'], area: 'disciplinar', emoji: '🔬' },
            { id: 'fba2', nombre: 'Formación Básica II', prerequisitos: ['fba'], area: 'general', emoji: '🎓' },
            { id: 'ing2', nombre: 'Curso Sello II: Inglés II', prerequisitos: ['ing1'], area: 'general', emoji: '🎓' }
        ]},
        { semestre: 3, ramos: [
            { id: 'alg2', nombre: 'Álgebra II', prerequisitos: ['alg1'], area: 'disciplinar', emoji: '🔬' },
            { id: 'cal2', nombre: 'Cálculo II', prerequisitos: ['cal1'], area: 'disciplinar', emoji: '🔬' },
            { id: 'qgral', nombre: 'Química General', prerequisitos: [], area: 'disciplinar', emoji: '🔬' },
            { id: 'geo_gen', nombre: 'Geología General', prerequisitos: [], area: 'profesional', emoji: '⛏️' },
            { id: 'tic', nombre: 'TIC para la Minería', prerequisitos: [], area: 'profesional', emoji: '⛏️' },
            { id: 'csi3', nombre: 'Curso Sello Institucional III', prerequisitos: [], area: 'general', emoji: '🎓' }
        ]},
        { semestre: 4, ramos: [
            { id: 'edif', nombre: 'Ecuaciones Diferenciales', prerequisitos: ['cal2'], area: 'disciplinar', emoji: '🔬' },
            { id: 'cal3', nombre: 'Cálculo III', prerequisitos: ['cal2'], area: 'disciplinar', emoji: '🔬' },
            { id: 'elecmag', nombre: 'Electricidad y Magnetismo', prerequisitos: ['cal2', 'mec'], area: 'disciplinar', emoji: '🔬' },
            { id: 'metprod', nombre: 'Métodos de Producción Minera', prerequisitos: ['iminas'], area: 'profesional', emoji: '⛏️' },
            { id: 'petmin', nombre: 'Petrografía y Mineralogía', prerequisitos: ['geo_gen'], area: 'profesional', emoji: '⛏️' },
            { id: 'csi4', nombre: 'Curso Sello Institucional IV', prerequisitos: ['csi3'], area: 'general', emoji: '🎓' }
        ]},
        { semestre: 5, ramos: [
            { id: 'proest', nombre: 'Probabilidad y Estadística', prerequisitos: ['cal3'], area: 'disciplinar', emoji: '🔬' },
            { id: 'feco', nombre: 'Fundamentos de Economía', prerequisitos: [], area: 'profesional', emoji: '⛏️' },
            { id: 'invop', nombre: 'Investigación Operativa', prerequisitos: ['alg2'], area: 'profesional', emoji: '⛏️' },
            { id: 'termo', nombre: 'Termodinámica', prerequisitos: ['qgral'], area: 'profesional', emoji: '⛏️' },
            { id: 'metnum', nombre: 'Métodos Numéricos', prerequisitos: ['edif'], area: 'profesional', emoji: '⛏️' },
            { id: 'topogeo', nombre: 'Topografía y Geomensura Minera', prerequisitos: [], area: 'profesional', emoji: '⛏️' }
        ]},
        { semestre: 6, ramos: [
            { id: 'geoest', nombre: 'Geoestadística', prerequisitos: ['proest'], area: 'disciplinar', emoji: '🔬' },
            { id: 'evalp', nombre: 'Evaluación de Proyectos', prerequisitos: ['feco'], area: 'profesional', emoji: '⛏️' },
            { id: 'exgeo', nombre: 'Exploración y Geología Económica', prerequisitos: ['petmin'], area: 'profesional', emoji: '⛏️' },
            { id: 'pertro', nombre: 'Perforación y Tronadura', prerequisitos: ['metprod'], area: 'profesional', emoji: '⛏️' },
            { id: 'taller1', nombre: 'Taller Integrador I', prerequisitos: [], area: 'profesional', emoji: '⛏️' },
            { id: 'interd1', nombre: 'Interdisciplinar', prerequisitos: [], area: 'general', emoji: '🎓' }
        ]},
        { semestre: 7, ramos: [
            { id: 'evalyac', nombre: 'Evaluación Económica de Yacimientos', prerequisitos: ['evalp', 'exgeo'], area: 'profesional', emoji: '⛏️' },
            { id: 'mecanicaf', nombre: 'Mecánica de Fluidos', prerequisitos: ['termo'], area: 'profesional', emoji: '⛏️' },
            { id: 'metalurgia', nombre: 'Fundamentos de Metalurgia', prerequisitos: ['qgral'], area: 'profesional', emoji: '⛏️' },
            { id: 'cargotrans', nombre: 'Carguío y Transporte', prerequisitos: ['pertro'], area: 'profesional', emoji: '⛏️' },
            { id: 'mecanicaroc', nombre: 'Mecánica de Rocas', prerequisitos: ['mec'], area: 'profesional', emoji: '⛏️' },
            { id: 'interd2', nombre: 'Interdisciplinar A+S', prerequisitos: ['interd1'], area: 'general', emoji: '🎓' },
            { id: 'practop', nombre: 'Práctica Operacional', prerequisitos: [], area: 'profesional', emoji: '⛏️' }
        ]},
        { semestre: 8, ramos: [
            { id: 'software', nombre: 'Software de Productividad Minera', prerequisitos: ['metnum'], area: 'profesional', emoji: '⛏️' },
            { id: 'vent', nombre: 'Ventilación y Servicios Mina', prerequisitos: ['mecanicaf'], area: 'profesional', emoji: '⛏️' },
            { id: 'procmin', nombre: 'Procesamiento de Minerales', prerequisitos: ['metalurgia'], area: 'profesional', emoji: '⛏️' },
            { id: 'legis', nombre: 'Legislación Minera', prerequisitos: [], area: 'profesional', emoji: '⛏️' },
            { id: 'seguridad', nombre: 'Seguridad y Medio Ambiente en Minería', prerequisitos: [], area: 'profesional', emoji: '⛏️' },
            { id: 'taller2', nombre: 'Taller Integrador II', prerequisitos: ['taller1'], area: 'profesional', emoji: '⛏️' }
        ]},
        { semestre: 9, ramos: [
            { id: 'titulo1', nombre: 'Proyecto de Título I', prerequisitos: ['taller2'], area: 'profesional', emoji: '⛏️' },
            { id: 'gestionemp', nombre: 'Gestión de Empresas y Liderazgo', prerequisitos: [], area: 'profesional', emoji: '⛏️' },
            { id: 'diseno_sub', nombre: 'Diseño y Planif. Mina Subterránea', prerequisitos: ['cargotrans', 'mecanicaroc'], area: 'profesional', emoji: '⛏️' },
            { id: 'diseno_rajo', nombre: 'Diseño y Planif. Rajo Abierto', prerequisitos: ['cargotrans', 'mecanicaroc'], area: 'profesional', emoji: '⛏️' },
            { id: 'excelencia', nombre: 'Excelencia Operacional', prerequisitos: [], area: 'profesional', emoji: '⛏️' }
        ]},
        { semestre: 10, ramos: [
            { id: 'titulo2', nombre: 'Proyecto de Título II', prerequisitos: ['titulo1'], area: 'profesional', emoji: '⛏️' },
            { id: 'gestiontec', nombre: 'Gestión de la Tecnología en Minería', prerequisitos: ['gestionemp'], area: 'profesional', emoji: '⛏️' },
            { id: 'resp_social', nombre: 'Responsabilidad Social Empresarial', prerequisitos: [], area: 'general', emoji: '🎓' },
            { id: 'innova', nombre: 'Innovación y Emprendimiento', prerequisitos: [], area: 'general', emoji: '🎓' },
            { id: 'practicapro', nombre: 'Práctica Profesional', prerequisitos: ['practop'], area: 'profesional', emoji: '⛏️' }
        ]}
    ];

    const mallaContainer = document.getElementById('malla-container');
    let ramosAprobados = new Set(JSON.parse(localStorage.getItem('ramosAprobadosIngMinasSanrio')) || []);

    function renderMalla() {
        mallaContainer.innerHTML = '';
        
        mallaData.forEach(semestreData => {
            const semestreDiv = document.createElement('div');
            semestreDiv.className = 'semestre';
            semestreDiv.id = `sem${semestreData.semestre}`;
            
            const tituloDiv = document.createElement('div');
            tituloDiv.className = 'semestre-titulo';
            tituloDiv.textContent = `🎀 Semestre ${semestreData.semestre} 🎀`;
            semestreDiv.appendChild(tituloDiv);

            semestreData.ramos.forEach(ramo => {
                const ramoDiv = document.createElement('div');
                ramoDiv.className = 'ramo';
                ramoDiv.classList.add(ramo.area); // <--- AÑADE LA CLASE DEL ÁREA
                ramoDiv.dataset.id = ramo.id;
                ramoDiv.textContent = `${ramo.emoji} ${ramo.nombre}`; // <--- AÑADE EL EMOJI
                
                // Lógica de prerrequisitos (la que desbloquea ramo por ramo)
                const prerrequisitosCumplidos = ramo.prerequisitos.every(pr => ramosAprobados.has(pr));

                if (ramosAprobados.has(ramo.id)) {
                    ramoDiv.classList.add('aprobado');
                } else if (!prerrequisitosCumplidos) {
                    ramoDiv.classList.add('bloqueado');
                }

                ramoDiv.addEventListener('click', () => toggleRamo(ramo, prerrequisitosCumplidos));
                semestreDiv.appendChild(ramoDiv);
            });
            
            mallaContainer.appendChild(semestreDiv);
        });
    }

    function toggleRamo(ramo, prerrequisitosCumplidos) {
        if (ramosAprobados.has(ramo.id)) {
            ramosAprobados.delete(ramo.id);
            const aDesaprobarRecursivo = new Set([ramo.id]);
            let cambio = true;
            while(cambio) {
                cambio = false;
                mallaData.flat().flatMap(s => s.ramos).forEach(r => {
                    if (ramosAprobados.has(r.id) && r.prerequisitos.some(p => aDesaprobarRecursivo.has(p))) {
                        ramosAprobados.delete(r.id);
                        aDesaprobarRecursivo.add(r.id);
                        cambio = true;
                    }
                });
            }

        } else if (prerrequisitosCumplidos) {
            ramosAprobados.add(ramo.id);
        } else {
            alert('¡Espera! ૮₍ ´ ꒳ `₎ა ♥ Debes aprobar los prerrequisitos primero.');
            return;
        }

        localStorage.setItem('ramosAprobadosIngMinasSanrio', JSON.stringify([...ramosAprobados]));
        renderMalla();
    }

    renderMalla();
    </script>
</body>
</html>
